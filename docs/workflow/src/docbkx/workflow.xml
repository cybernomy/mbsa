<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook V5.0//EN"
    "http://www.oasis-open.org/docbook/xml/5.0b5/dtd/docbook.dtd">
<book xmlns:xi="http://www.w3.org/2001/XInclude"
      version="5.0"
      xml:lang="ru">
  <title>
    Потоки работ в системе <?eval ${project.organization.name}?>
  </title>
  <subtitle>Руководство пользователя</subtitle>
  <info>
    <copyright>
      <year><?eval ${project.inceptionYear}?></year>
      <year><?eval ${now}?></year>
      <holder><?eval ${project.organization.name}?></holder>
    </copyright>
    <releaseinfo><?eval ${project.version}?></releaseinfo>
  </info>
  <preface xml:id="preface" revision="1">
    <title>Целевая аудитория</title>
    <para>Данное руководство предназначено для пользователей, работающих
      с модулем &quot;Потоки работ&quot; системы <?eval ${project.organization.name}?>.
    </para>
  </preface>
  <chapter xml:id="wf">
    <title>Управление потоками работ</title>
    <para>Внедрение комплекса решений, основанных на <?eval ${project.organization.name}?> System
      Workflow,
      позволяет управлять потоками работ предприятия не на уровне косвенно
      связанных между собой документов, а на более высоком качественном уровне -
      существует возможность управлять текущим состоянием всего потока работ в
      целом. Например, можно определить текущее состояние полученного заказа от
      покупателя, выявить, что является причиной задержки выполнения заказа,
      определить, кто из сотрудников какое задание выполняет в данный момент, и т.д.
    </para>
    <section xml:id="wf_01">
      <title>Базовые концепции Workflow</title>
      <para>Workflow - это система, обеспечивающая полную или частичную координацию
        выполнения производственных операций (заданий, работ, функций), которые
        составляют структурированные бизнес-процессы предприятия.
      </para>
      <para>Технология Workflow поддерживает управление процессами, содержащими
        как автоматизированные - выполняемые средствами системы, так и неавтоматизированные -
        выполняемые вручную операции. Благодаря этой особенности бизнес-процесс предприятия
        может быть представлен в виде потока работ - Workflow, при условии, что этот процесс:
      </para>
      <itemizedlist>
        <listitem>
          <para>выделен;</para>
        </listitem>
        <listitem>
          <para>структурирован;</para>
        </listitem>
        <listitem>
          <para>выполняется по правилам, которые можно сформулировать;</para>
        </listitem>
        <listitem>
          <para>периодически повторяется.</para>
        </listitem>
      </itemizedlist>
      <para>Первые три ограничения являются ответом на вопрос "какие процессы можно
        описать", а последнее - "какие целесообразно".
      </para>
      <para>Поток работ состоит из действий (операций), для выполнения которых
        необходимы определённые ресурсы.
      </para>
      <para>Основные параметры потока работ в системе Millennium Workflow описываются
        в менеджере потоков.
      </para>
      <section xml:id="wf_01_01">
        <title>Правила построения потока работ</title>
        <para>Прежде всего, необходимо различать менеджеры потоков работ и сами потоки работ.</para>
        <para>Менеджер потока работ - образец будущего потока работ, в котором указываются
          модели действия и их взаимосвязь.
        </para>
        <para>Поток работ - текущий экземпляр, в который входят модели действия и
          их взаимосвязь, и который создаётся на основании образца (менеджера потока работ).
        </para>
        <para>Если после создания потока работ изменяется образец (менеджер), то
          эти изменения никак не влияют на уже созданный поток работ.
        </para>
        <para>
          <emphasis>Правильное и неправильное построение потока работ</emphasis>
        </para>
        <para>Рассмотрим пример потока работ, в котором нужно выполнить или "Действие 2",
          или вместе "Действие 3" и "Действие 4". Использование маршрутизатора
          <literal>OR</literal>
          противоречит концепции WorkFlow, так как в приведённом ниже
          примере потока работ система не сможет корректно выбрать, какие именно действия
          в каком порядке нужно выполнить.
        </para>
        <figure>
          <title>Неправильное построение</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/wrong.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
        <para>В таком случае можно ввести дополнительное действие, которое будет
          выполнять системный ресурс, и использовать маршрутизаторы
          <literal>XOR</literal>
          и<literal>AND</literal>.
        </para>
        <figure>
          <title>Правильное построение</title>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/right.gif"/>
            </imageobject>
          </mediaobject>
        </figure>
      </section>
      <section xml:id="wf_01_02">
        <title>Условие начала и окончания потока работ</title>
        <para>Хотя графически никак не отображается начало и конец потока работ,
          необходимо отслеживать (контролировать) начало и конец потока (чтобы он не зацикливался).
        </para>
        <para>В алгоритмах нужно отслеживать итерации.</para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/iteration.gif"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </section>
    </section>
    <section xml:id="wf_02">
      <title>Маршрутизаторы, применяемые в потоке работ</title>
      <para>В соответствии с концепцией WorkFlow в потоках работ могут применяться
        маршрутизаторы
        <literal>XOR</literal>
        и<literal>AND</literal>.
      </para>
      <para>Маршрутизаторы по условию
        <literal>OR</literal>
        не применяются в концепции
        WorkFlow, так как они противоречат этой концепции и могут быть заменены
        <literal>XOR</literal>
        и<literal>AND</literal>.
      </para>
      <para>Маршрутизаторы на графике потока работ не выделяются в виде отдельных
        компонентов, а настраиваются с помощью набора атрибутов и правил написания
        алгоритмов отработки и отката модели действия.
      </para>
      <para>
        <emphasis>Настройка маршрутизаторов на выходе модели:</emphasis>
      </para>
      <para>Маршрутизатор
        <literal>AND</literal>
        устанавливается по умолчанию,
        когда на исходящих стрелках не указываются номера направлений и в алгоритме
        выполнения модели действия не применяется функция
        <literal>SetDirection</literal>
        класса
        <literal>TWfActivityHelper</literal>
        (см. "Дополнительные классы алгоритмов").
      </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/and1.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>Маршрутизатор
        <literal>XOR</literal>
        устанавливается, когда на исходящих
        стрелках указываются номера направлений и в алгоритме выполнения модели
        действия при использовании условий обработки событий (операторы if, case
        и т.д.) применяется функция
        <literal>SetDirection</literal>
        класса
        <literal>TWfActivityHelper</literal>
        (см. "Дополнительные классы
        алгоритмов").
      </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/xor1.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>
        <emphasis>Настройка маршрутизаторов на входе модели:</emphasis>
      </para>
      <para>Маршрутизатор
        <literal>AND</literal>
        устанавливается в окне редактирования
        модели действия с помощью установки флага "Сумматор потоков".
        На приведённом рисунке флаг "Сумматор потоков" должен быть
        установлен в модели "Действие 3".
      </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/sum.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>Маршрутизатор
        <literal>XOR</literal>
        устанавливается, если в окне
        редактирования модели действия не установлен флаг "Сумматор потоков".
      </para>
      <para>Нумерация стрелок (связей) на входе маршрутизаторов не обязательна.</para>
      <para>В реальной настройке системы используются различные комбинации
        маршрутизаторов на входе и на выходе моделей действия.
      </para>
    </section>
  </chapter>
  <chapter xml:id="wfManagers">
    <title>Менеджеры потоков</title>
    <para>В менеджере потока определяются все основные параметры потока,
      описывается схема его выполнения, назначаются ресурсы и алгоритмы.
    </para>
    <para>Вход в раздел "Менеджеры потоков работ" осуществляется через
      главное меню системы:
      <menuchoice>
        <guimenu>Центр управления</guimenu>
        <guisubmenu>Потоки работ</guisubmenu>
        <guimenuitem>Менеджеры потоков</guimenuitem>
      </menuchoice>
      .
    </para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/add_manager.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para><guibutton>Наименование</guibutton>. Наименование потока в системе.
    </para>
    <para><guibutton>Описание</guibutton>. Краткое описание потока.
    </para>
    <para><guibutton>Категория</guibutton>. Дополнительное информационное поле, которое
      можно использовать, например, для классификации потоков.
    </para>
    <para><guibutton>Версия</guibutton>. Версия потока.
    </para>
    <para><guibutton>Приоритет</guibutton>. Принимает значение от 1 до 5 (высший приоритет - 1).
      Поток с более высоким приоритетом имеет преимущества при одновременном выполнении
      нескольких потоков.
    </para>
    <para><guibutton>Состояние</guibutton>: доступен/не доступен поток для выполнения.
    </para>
    <para>Cтруктура потока, модели действия и их взаимосвязь описываются в Конструкторе.</para>
    <para>Для создания потока выберите в контекстном меню пункт "Создать поток".
      Во время создания потока Вы можете задать следующие его параметры: код, наименование,
      приоритет, описание. Новый поток появится в соответствующем списке.
    </para>
    <para>Примечание: при копировании менеджеров потоков работ цветовые и пространственные
      характеристики не копируются.
    </para>
    <section xml:id="wfManagers_01">
      <title>Конструктор потоков</title>
      <para>В Конструкторе графически определяется структура потока работ,
        последовательность выполнения действий и условия перехода от одного
        к другому (связи между ними).
      </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/builder.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para>Для конструирования потока работ Вы можете воспользоваться сочетаниями клавиш,
        контекстным меню, панелью инструментов:
      </para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/toolbar.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>
      <para><emphasis>Добавить модель действия</emphasis>:
        На панели инструментов нажмите кнопку "Добавить". Затем в любом месте окна
        редактирования документооборота нажмите левую кнопку мыши. Появится окно
        параметров модели действия.
      </para>
      <para>
        <emphasis>Изменить объект.</emphasis>
      </para>
      <para>С помощью клавиатуры: Выделите объект, который Вы хотите редактировать и нажмите клавишу
        <keycombo>
          <keycap>F2</keycap>
        </keycombo>
        .
      </para>
      <para>С помощью мыши: Нажмите на панели инструментов кнопку-стрелку, затем выделите объект,
        который Вы хотите редактировать; из контекстного меню выберите пункт "Редактировать".
      </para>
      <para>
        <emphasis>Свойства объекта.</emphasis>
        Чтобы просмотреть или изменить свойства
        объекта, выделите его и нажмите кнопку "Свойства".
      </para>
      <para>
        <emphasis>Удалить объект.</emphasis>
        Чтобы удалить объект, выделите его и нажмите
        клавишу
        <keycombo>
          <keycap>Del</keycap>
        </keycombo>
        , или вызовите контекстное меню и
        выберите пункт "Удалить".
      </para>
      <section xml:id="wfManagers_01_01">
        <title>Модель действия</title>
        <para>Этапы потока работ описываются моделями действия.</para>
        <para>В этом окне описываются параметры действия, которое будет
          выполняться в рамках потока.
        </para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/add_model.gif"/>
            </imageobject>
          </mediaobject>
        </screenshot>
        <para><guibutton>Код</guibutton>. Код модели действия.
        </para>
        <para><guibutton>Наименование</guibutton>. Наименование модели действия.
        </para>
        <para><guibutton>Приоритет</guibutton>. Приоритет модели действия может
          иметь значение от 1 до 5.
        </para>
        <para><guibutton>Сумматор потоков</guibutton>. Если действию предшествуют два
          или более действий, сумматор потоков определяет, должны ли они быть выполнены
          все для запуска данного действия.
        </para>
        <para><guibutton>Описание</guibutton>. Краткое описание модели действия.
        </para>
        <para><guibutton>Поток</guibutton>. В модели действия можно использовать
          уже существующий в системе поток.
        </para>
        <para>
          <emphasis>Внимание: Подставлять в поле "<guibutton>Поток</guibutton>"
            тот же поток, который Вы в данный момент редактируете, нельзя!
          </emphasis>
        </para>
        <para><guibutton>Уведомление о событии</guibutton>. Система может послать уведомление
          о выполнении действия по электронной почте, пейджеру, SMS. Уведомление происходит
          в момент формирования<link linkend="wfAssignments">назначения</link>.
          Адреса для отправки информации указывает администратор для каждого пользователя.
          Подробнее о настройке сервисов отправки читайте в руководстве администратора.
        </para>
        <para><guibutton>Ресурсы</guibutton>. Определите ресурсы для выполнения этого потока.
        </para>
        <para>
          <link linkend="wfAlgorithms_01">
            <guibutton>Алгоритм выполнения</guibutton>
          </link>
          .
          Определите алгоритм для выполнения потока.
        </para>
        <para>
          <link linkend="wfAlgorithms_02">
            <guibutton>Алгоритм отката</guibutton>
          </link>
          . Вы
          можете определить алгоритм для отката потока.
        </para>
        <para>
          <link linkend="wfAlgorithms_03">
            <guibutton>Алгоритм комментария</guibutton>
          </link>
          .
          Вы можете прокомментировать назначение этого потока.
        </para>
        <para/>
      </section>
      <section xml:id="wfManagers_01_02">
        <title>Связь действий</title>
        <para>
          <emphasis>Добавить связь.</emphasis>
          Выберите на панели инструментов
          кнопку "Связь". Левой кнопкой мыши щёлкните на действии, которое
          Вы хотите связать с другими. Из контекстного меню выберите "Добавить связь".
          Затем правой кнопкой мыши щёлкните на действии, с которым Вы хотите связать
          предыдущее действие.
        </para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/link.gif"/>
            </imageobject>
          </mediaobject>
        </screenshot>
        <para>
          <guibutton>Направление</guibutton>
          играет роль в динамическом изменении потоков.
          Направления нумеруются от 1 до 100. Порядок выполнения направлений регулируется
          классом алгоритмов ActivityHelper.
        </para>
        <para><guibutton>Комментарий</guibutton>. Комментарий к связи.
        </para>
        <para>
          <emphasis>Изменить связь.</emphasis>
          Чтобы изменить параметры связи, выделите эту связь, а затем нажмите клавишу
          <keycombo>
            <keycap>F2</keycap>
          </keycombo>
          (или вызовите из контекстного меню пункт "Изменить&amp;).
          Изменить можно записи в полях ""Направление" и "Комментарий".
        </para>
        <para>Также Вы можете редактировать свойства связи.</para>
        <para>
          <emphasis>Удалить связь.</emphasis>
          Выделите стрелку-связь, которую
          Вы хотите удалить, затем нажмите клавишу
          <keycombo>
            <keycap>Del</keycap>
          </keycombo>
          или в контекстном меню выберите "Удалить связь".
        </para>
        <para>Вы можете перемещать объекты по Конструктору, удерживая левой кнопкой мыши.
          Переместив объект на выбранное Вами место, отпустите левую кнопку мыши. Связи
          автоматически перемещаются вместе с действием.
        </para>
        <para/>
      </section>
      <section xml:id="wfManagers_01_03">
        <title>Инструменты Конструктора</title>
        <para>Используя кнопки на панели инструментов в конструкторе (в
          карте настройки моделей и связей) можно выполнить следующие действия.
        </para>
        <para>
          <emphasis>Печать.</emphasis>
          Вы можете распечатать на принтере
          графическое изображение настройки документооборота.
        </para>
        <para>
          <emphasis>Выделить все.</emphasis>
          Нажав на эту кнопку, Вы
          выделите все объекты (узлы и связи) в редакторе настройки.
        </para>
        <para>
          <emphasis>На передний план.</emphasis>
          Выделенные объекты
          перемещаются на передний план. Будьте внимательны - они могут
          закрывать собой другие объекты.
        </para>
        <para>
          <emphasis>На задний план.</emphasis>
          Выделенные объекты перемещаются
          на задний план. Будьте внимательны - они могут оказаться скрытыми под
          другими объектами.
        </para>
        <para>
          <emphasis>Свойства.</emphasis>
          Если в редакторе нет выделенных
          объектов, вызывается окно "Свойства дизайнера". Если выделенные
          объекты есть, вызывается окно "Свойства объектов".
        </para>
      </section>
      <section xml:id="wfManagers_01_04">
        <title>Сочетания клавиш</title>
        <table>
          <tgroup cols="3">
            <thead>
              <row>
                <entry>Элемент управления</entry>
                <entry>Управляющие клавиши</entry>
                <entry>Примечание</entry>
              </row>
            </thead>
            <tbody>
              <row>
                <entry>Удалить выделенные объекты</entry>
                <entry align="center">Del</entry>
                <entry>Для выделенных объектов</entry>
              </row>
              <row>
                <entry>Изменение свойств выделенного объекта (объектов)</entry>
                <entry align="center">Enter</entry>
                <entry>Выделите объект и нажмите
                  <keycombo>
                    <keycap>Enter</keycap>
                  </keycombo>
                  .
                  Если не выделен ни один объект, вызывается окно "Свойства дизайнера".
                </entry>
              </row>
              <row>
                <entry>Выделить все</entry>
                <entry align="center">Ins</entry>
                <entry/>
              </row>
              <row>
                <entry>Вызвать окно "Свойства дизайнера"</entry>
                <entry align="center">Enter</entry>
                <entry>Если нет выделенных объектов</entry>
              </row>
            </tbody>
          </tgroup>
        </table>
        <para>Вы также можете управлять конструктором с помощью мыши и кнопок
          панели управления.
        </para>
      </section>
      <section xml:id="wfManagers_01_05">
        <title>Свойства дизайнера</title>
        <para>Дизайнер - это встроеннный редактор графического представления документооборота.
          Чтобы вызвать окно свойств дизайнера, убедитесь что нет выделенных объектов (нажмите
          клавишу
          <keycombo>
            <keycap>Esc</keycap>
          </keycombo>
          ), нажмите кнопку
          "<guibutton>Свойства</guibutton>"
          или клавишу
          <keycombo>
            <keycap>Enter</keycap>
          </keycombo>
          .
        </para>
        <para>Примечание: если выделенные объекты есть, будет вызвано не окно "Свойства
          дизайнера", а окно "<link linkend="wfManagers_01_06">Свойства объекта</link>".
        </para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/designer_kind.gif"/>
            </imageobject>
          </mediaobject>
        </screenshot>
        <para>Вы можете настраивать следующие свойства дизайнера:</para>
        <para><guibutton>Выравнивание по сетке</guibutton>. Если этот пункт отмечен флагом,
          при перемещении объекта происходит его привязка к направляющей сетке.
        </para>
        <para><guibutton>Показывать сетку</guibutton>. Если этот пункт отмечен флагм, отображаются
          точки направляющей сетки.
        </para>
        <para><guibutton>Размер сетки</guibutton>. По умолчанию размер ячейки направляющей
          сетки минимальный и составляет 8 пикселов. Вы можете увеличить его по своему
          желанию. Максимальное значение - 100 пикселов.
        </para>
        <para>Для удобства редактирования можно изменить цвет фона, маркера (выделения), сетки.
          Для этого щёлкните левой кнопкой мыши на соответствующий прямоугольник справа. Появится
          системная палитра цветов. Выберите желаемый цвет и нажмите кнопку
          "<guibutton>OK</guibutton>".
        </para>
        <para>Настройки свойств дизайнера не сохраняются вместе с картой.</para>
      </section>
      <section xml:id="wfManagers_01_06">
        <title>Свойства объекта</title>
        <para>Вы можете редактировать графические свойства объекта (узла или связи).
          Выделите объект, свойства которого Вы хотите изменить, и нажмите кнопку
          "Свойства" или клавишу
          <keycombo>
            <keycap>Enter</keycap>
          </keycombo>
          .
        </para>
        <para>Примечание: если выделенных объектов в редакторе нет, будет вызвано
          окно "<link linkend="wfManagers_01_05">Свойства дизайнера</link>".
        </para>
        <section xml:id="wfManagers_01_06_01">
          <title>Свойства объекта</title>
          <para>Окно "Свойства объекта" появляется, если одновременно
            выделены и узлы (этапы), и связи.
          </para>
          <screenshot>
            <mediaobject>
              <imageobject>
                <imagedata fileref="images/object_kind.gif"/>
              </imageobject>
            </mediaobject>
          </screenshot>
          <para>Вы можете задать цвет заполнения, цвет линии, параметры шрифта.
            Эти параметры будут применены ко всем выделенным объектам.
          </para>
        </section>
        <section xml:id="wfManagers_01_06_02">
          <title>Свойства узла</title>
          <screenshot>
            <mediaobject>
              <imageobject>
                <imagedata fileref="images/uzel_kind.gif"/>
              </imageobject>
            </mediaobject>
          </screenshot>
          <para>Вы можете настраивать следующие свойства узла:</para>
          <para><guibutton>Цвет тела и бордюра</guibutton>. Щёлкните левой кнопкой мыши на
            соответствующий прямоугольник справа. Появится системная палитра цветов.
            Выберите желаемый цвет и нажмите кнопку "<guibutton>OK</guibutton>".
          </para>
          <para><guibutton>Выравнивание текста</guibutton>. Слева, справа или по центру
          </para>
          <para><guibutton>Отступ текста</guibutton>. Задаётся отступ текста от края объекта.
            Может принимать значение от 0 до 100. Помните, что отступ задаётся как
            по горизонтали, так и по вертикали.
          </para>
          <para><guibutton>Изменить шрифт</guibutton>. Вы можете изменить
            используемый шрифт и его параметры.
          </para>
          <para><guibutton>Изменить фон</guibutton>. Вы можете использовать в качестве
            фоновой картинки файлы формата bmp или wmf.
          </para>
          <para><guibutton>Очистить фон</guibutton>. Убрать фоновую картинку.
          </para>
        </section>
        <section xml:id="wfManagers_01_06_03">
          <title>Свойства связи</title>
          <para>
            <screenshot>
              <mediaobject>
                <imageobject>
                  <imagedata fileref="images/link_kind.gif"/>
                </imageobject>
              </mediaobject>
            </screenshot>
          </para>
          <para><guibutton>Изменить направление</guibutton>. Чтобы изменить
            направление связи на противоположное, отметьте этот пункт флагом и
            нажмите "<guibutton>Применить</guibutton>" или
            "<guibutton>OK</guibutton>".
          </para>
          <para>Внимание: при повторном использовании этой функции направление
            изменится снова.
          </para>
          <para><guibutton>Стиль</guibutton>. Вы можете задать желаемый стиль
            отображения линии: сплошной, пунктирный или точками.
          </para>
          <para><guibutton>Цвет</guibutton>. Можно изменить цвет линии и стрелки.
            Для этого щёлкните левой кнопкой мыши на соответствующий прямоугольник
            справа. Появится системная палитра цветов. Выберите желаемый цвет и
            нажмите кнопку<guibutton>OK</guibutton>.
          </para>
          <para/>
          <para>См. также: "<link linkend="wfManagers_01_05">Свойства дизайнера</link>"
          </para>
        </section>
      </section>
    </section>
  </chapter>
  <chapter xml:id="wfResources">
    <title>Ресурсы</title>
    <para>Для выполнения
      <link linkend="wfManagers_01_01">действия</link>
      в рамках потока
      работ требуется определить ресурсы, которые будут выполнять это действие.
    </para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/resource.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para><guibutton>Код</guibutton>. Уникальный код ресурса
      в системе <?eval ${project.organization.name}?> System.
    </para>
    <para><guibutton>Вид</guibutton>. Может быть автоматический, человеческий или системный ресурс.
    </para>
    <para>Если указан<emphasis>человеческий ресурс</emphasis>, система создаёт назначение
      для пользователя, назначенного ресурсом.
    </para>
    <para>При указании
      <emphasis>автоматического ресурса</emphasis>
      система формирует
      задание назначенному аппарату.
    </para>
    <para>
      <emphasis>Системный ресурс</emphasis>
      - подвид автоматического ресурса,
      который выполняет действие без участия человека, с помощью самой
      системы <?eval ${project.organization.name}?> System.
      Для того, чтобы указать системный ресурс, нужно добавить пользователя
      <literal>SYSTEM</literal>, принадлежащего группе<literal>SYSTEM</literal>,
      и указать эту группу в поле "<guibutton>Группы</guibutton>" у ресурса,
      который Вы назначаете системным.
    </para>
    <para>
      <emphasis>ВНИМАНИЕ! Действие, выполненное системным ресурсом, невозможно
        откатить даже теоретически.
      </emphasis>
    </para>
    <para>В случае необходимости возвратиться в модель действия, предшествующую
      автоматически выполненной модели, необходимо и достаточно построить обратную
      связь с новой итерацией. (При этом помните, что редактирование менеджера
      процессов не влияет на уже созданный поток.)
    </para>
    <para><guibutton>Наименование</guibutton>. Наименование ресурса.
    </para>
    <para><guibutton>Группы</guibutton>. Указывается принадлежность ресурса к группе
      пользователей системы, правами которой он обладает.
    </para>
    <para>См. также:
      <link linkend="wfManagers_01_01">Модели действия</link>
    </para>
  </chapter>
  <chapter xml:id="wfFlows">
    <title>Потоки</title>
    <para>Создать процесс в системе <?eval ${project.organization.name}?> System можно из<link
        linkend="wfManagers">Менеджера
      потоков</link>.
    </para>
    <para>Обратиться к списку созданных процессов можно через главное меню
      <menuchoice>
        <guimenu>Центр управления</guimenu>
        <guisubmenu>Потоки работ</guisubmenu>
        <guimenuitem>Потоки</guimenuitem>
      </menuchoice>
      .
    </para>
    <para><guibutton>Состояние потока</guibutton>. Поток может иметь следующие состояния:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          <emphasis>Открыт. Не запущен. Не стартовал.</emphasis>
          Это первое состояние потока после его создания. Для запуска процесса
          воспользуйтесь пунктом контекстного меню "Запустить".
        </para>
      </listitem>
      <listitem>
        <para>
          <emphasis>Открыт. Запущен.</emphasis>
          После того, как
          поток запущен, формируется
          <link linkend="wfAssignments">назначение</link>
          для указанного в потоке ресурса.
        </para>
      </listitem>
      <listitem>
        <para>
          <emphasis>Закрыт. Выполнен.</emphasis>
          Это состояние
          присваивается потоку после того, как приняты все
          <link linkend="wfAssignments">назначения</link>
          и выполнены все действия в рамках данного потока.
        </para>
      </listitem>
    </itemizedlist>
    <para>Вы можете подробно посмотреть текущее состояние потока работ, воспользовавшись
      пунктом контекстного меню "<emphasis>Состояние потока</emphasis>". При
      этом откроется Карта состояния потока работ, где будет отражено состояние каждого
      действия в рамках данного потока.
      Здесь же можно посмотреть историю каждого действия, нажав правой кнопкой мыши
      на действии и выбрав из контекстного меню пункт "<emphasis>История
        действия</emphasis>".
    </para>
    <para><guibutton>Приоритет</guibutton>. В случае одновременного запуска системой
      нескольких потоков, поток с наивысшим приоритетом выполняется первым.
    </para>
    <para>Команда контекстного меню "<emphasis>Запустить</emphasis>" инициирует
      выполнение потока в системе. После того, как поток запущен, формируется назначение для
      указанного в потоке ресурса.
    </para>
    <para>Если поток выполнен и закрыт или его запуск невозможен по каким-то другим
      причинам, система выдаст сообщение "<emphasis>Невозможен старт потока</emphasis>".
      Запускать вторично уже запущенный поток не нужно, в этом случае система выдаст
      сообщение "<emphasis>Поток запущен</emphasis>". Если Вам нужно запустить
      аналогичный поток, обратитесь к менеджеру потоков и создайте новый поток.
    </para>
    <para>Для того, чтобы посмотреть историю состояний потока, воспользуйтесь пунктом
      контекстного меню "<emphasis>История</emphasis>". Откроется окно
      "<emphasis>История потока</emphasis>", где зарегистрированы изменения
      состояний данного потока.
    </para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/history_flow.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para>Можно посмотреть историю каждого действия, воспользовавшись пунктом контекстного
      меню "<emphasis>Состояние потока</emphasis>".
    </para>
  </chapter>
  <chapter xml:id="wfAssignments">
    <title>Назначения</title>
    <para>После того, как запущен<link linkend="wfFlows">поток</link>, формируется
      назначение для указанного в модели действия<link linkend="wfResources">ресурса</link>.
      Если в модели действия было указано "Уведомление о событии", то при
      формировании назначения система уведомит пользователя указанным способом.
    </para>
    <para><guibutton>Код действия</guibutton>. Код<link linkend="wfManagers_01_01">действия</link>,
      в рамках которого сформировано назначение.
    </para>
    <para><guibutton>Наименование действия</guibutton>. Наименование
      <link linkend="wfManagers_01_01">действия</link>, в рамках которого сформировано назначение.
    </para>
    <para><guibutton>Наименование процесса</guibutton>. Наименование<link linkend="wfFlows">
      потока</link>,
      в рамках которого сформировано назначение.
    </para>
    <para><guibutton>Комментарий</guibutton>. Комментарий назначения определяется в 
      <link linkend="wfManagers_01">Конструкторе потоков</link>
      при добавлении
      <link linkend="wfManagers_01_01">модели действия</link>.
    </para>
    <para><guibutton>Итерация</guibutton>. Помогает определить, в который раз выполняется
      данный алгоритм (если в алгоритме используется цикл).
    </para>
    <para>Вы можете принять назначение, воспользовавшись командной контекстного меню
      "<emphasis>Принять</emphasis>".
    </para>
    <para>После принятия назначение исчезает из списка назначений и формируется соответствующий
      <link linkend="wfRollback">Сегмент отката</link>.
    </para>
  </chapter>
  <chapter xml:id="wfRollback">
    <title>Сегменты отката</title>
    <para>Сразу после того, как принято<link linkend="wfAssignments">назначения</link>,
      сформированное алгоритмом выполнения действия потока работ, его возможно отменить.
    </para>
    <para>Возможность отмены назначения, сформированного алгоритмом выполнения потока
      работ, определяется указанным в модели действия алгоритмом отката.
    </para>
    <para>В сегменте отката указывается следующая информация:</para>
    <para><guibutton>Итерация</guibutton>. Помогает определить, в который раз
      выполняется данный алгоритм.
    </para>
    <para><guibutton>Комментарий</guibutton>. Комментарий к сегменту отката может
      определяться в самом алгоритме.
    </para>
    <para><guibutton>Дата создания</guibutton>. Сегмент отката формируется сразу после
      принятия соответствующего назначения.
    </para>
    <para><guibutton>Код процесса</guibutton>. Код<link linkend="wfFlows">потока работ</link>.
    </para>
    <para><guibutton>Наименование процесса</guibutton>. Наименование<link linkend="wfFlows">потока
      работ</link>.
    </para>
    <para><guibutton>Код действия</guibutton>. Код<link linkend="wfManagers_01_01">действия</link>.
    </para>
    <para><guibutton>Наименование действия</guibutton>. Наименование действия.
    </para>
    <para><guibutton>Ресурс</guibutton>.<link linkend="wfResources">Ресурс</link>,
      принявший назначение.
    </para>
  </chapter>
  <chapter xml:id="wfAlgorithms">
    <title>Алгоритмы</title>
    <para>Выполнение потока регулируется алгоритмами, которые хранятся в 
      <emphasis>Репозитории
        алгоритмов
      </emphasis>
      и указываются в 
      <link linkend="wfManagers_01_01">моделях действия</link>
      потоков работ. Подробно об алгоритмах, использующихся в описании потоков, Вы можете прочитать
      в "Руководстве администратора системы <?eval ${project.organization.name}?> System".
    </para>
    <section xml:id="wfAlgorithms_01">
      <title>Алгоритм выполнения</title>
      <para>Предназначен для выполнения каких-либо действий при выполнении потока.
        Любой алгоритм должен вернуть результат выполнения. По умолчанию он имеет
        значение<literal>CompletedYes</literal>. Это говорит о том, что если не 
        возникло никаких исключительных ситуаций, то выполнение алгоритма будет
        признано и все действия зафиксированы.
      </para>
      <para>Вы можете вернуть результат<literal>CompletedNo</literal>, тем самым
        отменив все действия, связанные с этим этапом.
      </para>
    </section>
    <section xml:id="wfAlgorithms_02">
      <title>Алгоритм отката</title>
      <para>Предназначен для выполнения
        <link linkend="wfRollback">отката</link>
        текущего этапа. Он также требует возвращения результата. По умолчанию он
        имеет значение<literal>CompletedYes</literal>.
      </para>
      <para>
        <emphasis>Примечание:</emphasis>
        алгоритмы потоков работ поддерживают
        механизм обратных вызовов, т.е. могут учитывать ввод данных и интерактивно
        взаимодействовать с пользователем.
      </para>
    </section>
    <section xml:id="wfAlgorithms_03">
      <title>Алгоритм комментария</title>
      <para>Предназначен для создания комментария к назначению. Например, алгоритм
        комментария может указывать конкретный номер документа, который нужно
        отработать. В комментарии может быть просто написано "Примите это
        назначение", если от исполнителя (ресурса) требуется просто принять
        адресованное ему назначение.
      </para>
      <para>Рекомендуется не выполнять в алгоритме комментария никаких действий,
        связанных с изменением данных.
      </para>
    </section>
    <para>Алгоритмы потоков работ имеют
      <link linkend="wfAlgorithms_04">дополнительные
        классы
      </link>
      для управления выполнением и изменением состояния.
    </para>
    <section xml:id="wfAlgorithms_04">
      <title>Дополнительные классы алгоритмов</title>
      <para>Алгоритмы потоков работ имеют дополнительные классы для управления
        выполнением и изменением состояния.
      </para>
      <section xml:id="wfAlgorithms_04_01">
        <title>TWfProcessHelper</title>
        <para>Класс
          <literal>TWfProcessHelper</literal>
          имеет следующие методы:
        </para>
        <para>
          <literal>procedure SetResult(const AName, AValue: string) //</literal>
          установка результата для потока работ. Это позволяет передавать данные на
          протяжении всего выполнения потока работ. Например, в одном этапе Вы можете
          сохранить какое-либо значение под любым именем, а затем считать его для использования.
        </para>
        <para>
          <literal>function GetResult(const AName: string): string; //</literal>
          считывание результата, установленного предыдущим методом.
        </para>
        <para>
          <literal>function GetActivityResult(const AKey, Attr: string): string; //</literal>
          считывание результата установленного в алгоритме этапа.
        </para>
        <para>
          <literal>procedure SuspendActivity(const AKey: string); //</literal>
          приостановка потока работ.
        </para>
        <para>
          <literal>procedure ResumeActivity(const AKey: string); //</literal>
          возобновление потока работ.
        </para>
        <para>
          <literal>procedure Continue; //</literal>
          продолжение потока работ.
        </para>
      </section>
      <section xml:id="wfAlgorithms_04_02">
        <title>TWfActivityHelper</title>
        <para>Класс
          <literal>TWfActivityHelper</literal>
          имеет следующие методы:
        </para>
        <para>
          <literal>procedure SetResult(const AName, AValue: string) //</literal>
          установка результата для потока работ. Это позволяет передавать
          данные на протяжении всего выполнения потока работ. Например,
          в одном этапе Вы можете сохранить какое-либо значение под любым
          именем, а затем считать его для использования.
        </para>
        <para>
          <literal>function GetResult(const AName: string): string; //</literal>
          считывание результата установленного предыдущим методом.
        </para>
        <para>
          <literal>function GetActivityResult(const AKey, Attr: string): string; //</literal>
          считывание результата установленного в алгоритме этапа.
        </para>
        <para>
          <literal>procedure SuspendActivity(const AKey: string); //</literal>
          приостановка потока работ.
        </para>
        <para>
          <literal>procedure ResumeActivity(const AKey: string); //</literal>
          возобновление потока работ.
        </para>
        <para>
          <literal>procedure Continue; //</literal>
          продолжение потока работ.
        </para>
      </section>
      <section xml:id="wfAlgorithms_04_03">
        <title>TDocumentProcessHelper</title>
        <para>Класс
          <literal>TDocumentProcessHelper</literal>
          имеет следующие методы:
        </para>
        <para>
          <literal>function CreateDocument(const ADocSection: TGlobalDocSection): TIDType; //
          </literal>
          создание документа.
        </para>
        <para>
          <literal>function CreateDocumentOverModel(const ADocSection:
            TGlobalDocSection; const AModelId: TIDType): TIDType; //
          </literal>
          создание документа на основании образца.
        </para>
        <para>
          <literal>procedure RemoveDocument(const ADocSection: TGlobalDocSection;
            const ADocumentId: TIDType); //
          </literal>
          удаление документа.
        </para>
        <para>
          <literal>function Execute(const ADocumentId: TIDType): integer; //
          </literal>
          отработка документа по документообороту.
        </para>
        <para>
          <literal>function Rollback(const ADocumentId: TIDType): integer; //</literal>
          откат документооборота.
        </para>
      </section>
    </section>
  </chapter>
  <xi:include href="../../../shared/copyright.xml">
    <xi:fallback>
      <para>The copyright section could not be retrieved.</para>
    </xi:fallback>
  </xi:include>
</book>