<!-- <?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.3CR3//EN"
                      "../../../../docbook-support/support/docbook-dtd/docbookx.dtd"
[
<!ENTITY chap_001wkfl SYSTEM "modules/001workflow.xml">
<!ENTITY merp "Millennium ERP">
<!ENTITY fin "Финансовое управление">
<!ENTITY acc "Бухгалтерский учёт">
<!ENTITY workflow "Потоки работ">
]> -->
<chapter id="001wkfl">
  <title>Управление потоками работ</title>

  <para>Внедрение комплекса решений, основанных на &merp; Workflow,
    позволяет управлять потоками работ предприятия не на уровне косвенно
    связанных между собой документов, а на более высоком качественном уровне -
    существует возможность управлять текущим состоянием всего потока работ в
    целом. Например, можно определить текущее состояние полученного заказа от
    покупателя, выявить, что является причиной задержки выполнения заказа,
    определить, кто из сотрудников какое задание выполняет в данный момент, и т.д.
  </para>

  <section id="001wkfl_01">
    <title>Базовые концепции Workflow</title>

    <para>Workflow - это система, обеспечивающая полную или частичную координацию
      выполнения производственных операций (заданий, работ, функций), которые
      составляют структурированные бизнес-процессы предприятия.
    </para>

    <para>Технология Workflow поддерживает управление процессами, содержащими
      как автоматизированные - выполняемые средствами системы, так и неавтоматизированные -
      выполняемые вручную операции. Благодаря этой особенности бизнес-процесс предприятия
      может быть представлен в виде потока работ - Workflow, при условии, что этот процесс:
    </para>

    <itemizedlist>
      <listitem>
        <para>выделен;</para>
      </listitem>
      <listitem>
        <para>структурирован;</para>
      </listitem>
      <listitem>
        <para>выполняется по правилам, которые можно сформулировать;</para>
      </listitem>
      <listitem>
        <para>периодически повторяется.</para>
      </listitem>
    </itemizedlist>

    <para>Первые три ограничения являются ответом на вопрос &quot;какие процессы можно
      описать&quot;, а последнее - &quot;какие целесообразно&quot;.
    </para>

    <para>Поток работ состоит из действий (операций), для выполнения которых
      необходимы определённые ресурсы.
    </para>

    <para>Основные параметры потока работ в системе Millennium Workflow описываются
      в менеджере потоков.
    </para>

    <section id="001wkfl_01_01">
      <title>Правила построения потока работ</title>

      <para>Прежде всего, необходимо различать менеджеры потоков работ и сами потоки работ.</para>

      <para>Менеджер потока работ - образец будущего потока работ, в котором указываются
        модели действия и их взаимосвязь.
      </para>

      <para>Поток работ - текущий экземпляр, в который входят модели действия и
        их взаимосвязь, и который создаётся на основании образца (менеджера потока работ).
      </para>

      <para>Если после создания потока работ изменяется образец (менеджер), то
        эти изменения никак не влияют на уже созданный поток работ.
      </para>

      <para>
        <emphasis>Правильное и неправильное построение потока работ</emphasis>
      </para>

      <para>Рассмотрим пример потока работ, в котором нужно выполнить или &quot;Действие 2&quot;,
        или вместе &quot;Действие 3&quot; и &quot;Действие 4&quot;. Использование маршрутизатора
        <literal>OR</literal>
        противоречит концепции WorkFlow, так как в приведённом ниже
        примере потока работ система не сможет корректно выбрать, какие именно действия
        в каком порядке нужно выполнить.
      </para>

      <figure> <!-- начало вставки объекта. в данном случае рисунка -->
        <title>Неправильное построение</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/wrong.gif"/>
          </imageobject>
        </mediaobject>
      </figure>

      <para>В таком случае можно ввести дополнительное действие, которое будет
        выполнять системный ресурс, и использовать маршрутизаторы
        <literal>XOR</literal>
        и<literal>AND</literal>.
      </para>

      <figure> <!-- начало вставки объекта. в данном случае рисунка -->
        <title>Правильное построение</title>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/right.gif"/>
          </imageobject>
        </mediaobject>
      </figure>


    </section>

    <section id="001wkfl_01_02">
      <title>Условие начала и окончания потока работ</title>

      <para>Хотя графически никак не отображается начало и конец потока работ,
        необходимо отслеживать (контролировать) начало и конец потока (чтобы он не зацикливался).
      </para>

      <para>В алгоритмах нужно отслеживать итерации.</para>

      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/iteration.gif"/>
          </imageobject>
        </mediaobject>
      </screenshot>

    </section>

    <!-- конец id="001wkfl_01" -->
  </section>

  <!-- начало id="001wkfl_02" -->
  <section id="001wkfl_02">
    <title>Маршрутизаторы, применяемые в потоке работ</title>

    <para>В соответствии с концепцией WorkFlow в потоках работ могут применяться
      маршрутизаторы
      <literal>XOR</literal>
      и<literal>AND</literal>.
    </para>

    <para>Маршрутизаторы по условию
      <literal>OR</literal>
      не применяются в концепции
      WorkFlow, так как они противоречат этой концепции и могут быть заменены
      <literal>XOR</literal>
      и<literal>AND</literal>.
    </para>

    <para>Маршрутизаторы на графике потока работ не выделяются в виде отдельных
      компонентов, а настраиваются с помощью набора атрибутов и правил написания
      алгоритмов отработки и отката модели действия.
    </para>

    <para>
      <emphasis>Настройка маршрутизаторов на выходе модели:</emphasis>
    </para>

    <para>Маршрутизатор
      <literal>AND</literal>
      устанавливается по умолчанию,
      когда на исходящих стрелках не указываются номера направлений и в алгоритме
      выполнения модели действия не применяется функция
      <literal>SetDirection</literal>
      класса
      <literal>TWfActivityHelper</literal>
      (см. &quot;Дополнительные классы алгоритмов&quot;).
    </para>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/and1.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>Маршрутизатор
      <literal>XOR</literal>
      устанавливается, когда на исходящих
      стрелках указываются номера направлений и в алгоритме выполнения модели
      действия при использовании условий обработки событий (операторы if, case
      и т.д.) применяется функция
      <literal>SetDirection</literal>
      класса
      <literal>TWfActivityHelper</literal>
      (см. &quot;Дополнительные классы
      алгоритмов&quot;).
    </para>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/xor1.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>
      <emphasis>Настройка маршрутизаторов на входе модели:</emphasis>
    </para>

    <para>Маршрутизатор
      <literal>AND</literal>
      устанавливается в окне редактирования
      модели действия с помощью установки флага &quot;Сумматор потоков&quot;.
      На приведённом рисунке флаг &quot;Сумматор потоков&quot; должен быть
      установлен в модели &quot;Действие 3&quot;.
    </para>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/sum.gif"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>Маршрутизатор
      <literal>XOR</literal>
      устанавливается, если в окне
      редактирования модели действия не установлен флаг &quot;Сумматор потоков&quot;.
    </para>

    <para>Нумерация стрелок (связей) на входе маршрутизаторов не обязательна.</para>

    <para>В реальной настройке системы используются различные комбинации
      маршрутизаторов на входе и на выходе моделей действия.
    </para>

    <!-- конец id="001wkfl_02" -->
  </section>

</chapter>
