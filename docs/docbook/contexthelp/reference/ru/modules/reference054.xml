<!-- <?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.3CR3//EN"
                      "../../../../docbook-support/support/docbook-dtd/docbookx.dtd"
[
<!ENTITY chap_copyright SYSTEM "modules/copyright.xml">
<!ENTITY chap_ref054 SYSTEM "modules/reference054.xml">
<!ENTITY merp "Millennium Business Suite Anywhere">
<!ENTITY ref "Прикладные справочники">
]> -->
<chapter id="ref054">
  <title>Настраиваемые действия пользователя</title>
  
  	<para>В системе &merp; существует возможность создавать настраиваемые 
	действия пользователя, в контекстные меню и(или) браузеров добавляется действие пользователя 
	связанное с произвольным алгоритмом. </para>
	
 <!--	<para>Вход в справочник осуществляется через главное меню: 
	<menuchoice><guimenu>Администрирование</guimenu>
	<guimenuitem>Настраиваемые действия пользователя</guimenuitem>
	</menuchoice>. </para>
	
	<para>Содержит следующие атрибуты:</para>
	
	<screenshot><mediaobject><imageobject>
	<imagedata fileref="images/customuseraction.gif"/>
	</imageobject></mediaobject></screenshot>
	  
	<para><guibutton>Код</guibutton>. Код действия, уникальное поле.</para>
	
	<para><guibutton>Описание</guibutton>. Описание настраиваемого действия.</para>
	
	<para><guibutton>Бизнес-компонент</guibutton>. Бизнес-компонент, с которым связано данное действие</para>
	
	<para><guibutton>Код алгоритма</guibutton>. Алгоритм, который будет вызван при выполнении действия.</para>
	
	<para><guibutton>Заголовок пункта</guibutton>. Название действия, которое будет показано в меню 
	и панели инструментов.</para>
	
	<para><guibutton>Подсказка</guibutton>. Всплывающая подсказка для кнопки панели инструментов</para>
	
	<para><guibutton>Клавишная комбинация</guibutton>. Сочетание клавиш, при нажатии которого активизируется 
	действие. Например: <keycombo><keycap>F12</keycap></keycombo>.</para>
	
	<para><guibutton>Приоритет</guibutton>. Порядок следования действий в рамках 
	одного бизнес-компонента.</para>
	
	<para><guibutton>Доступно из меню</guibutton>. Флаг доступности действия в контекстном меню таблицы.</para>
		
	<para><guibutton>Доступно из панели инструментов</guibutton>. Флаг доступности действия из панели 
	инструментов браузера.</para>
	
	<para><guibutton>Обновлять после выполнения</guibutton>. Флаг принудительного обновления браузера 
	после выполнения действия.</para>
	
	<para><guibutton>Разделитель перед пунктом</guibutton>. Добавляет разделитель в меню перед пунктом действия.</para>
	
	<para><guibutton>Разделитель после пункта</guibutton>. Добавляет разделитель в меню после пункта действия.</para>
	
	<para><guibutton>Загрузить</guibutton>. Установить изображение для пункта меню и(или) кнопки панели 
	инструментов. 
       	Может быть загружено изображение из файла формата bmp, размером 16х16 пикселей. 
    	Обратите внимание: оливковый цвет (R128 G128 B0) не будет отображаться, поэтому 
	его можно использовать для фона картинки, если Вы хотите &quot;прозрачный&quot; 
	фон. Например, в такой картинке:</para>
	
	<screenshot><mediaobject><imageobject>
	<imagedata fileref="images/icon.gif"/>
	</imageobject></mediaobject></screenshot>
	
	<para>использованной в меню или панели инструментов, будет виден только красный 
	круг, а оливковый фон не будет виден:</para>
	
	<screenshot><mediaobject><imageobject>
	<imagedata fileref="images/icon2.gif"/>
	</imageobject></mediaobject></screenshot>
	
	<para><guibutton>Очистить</guibutton>. Очистить изображение.</para>
	
	<para><guibutton>Права на выполнение действия</guibutton>. Список групп пользователей, 
	для которых доступно данное действие.</para>
	
	<para> Для вызова настраиваемого действия пользователь должен отметить 
	записи, идентификаторы которых будут переданы в алгоритм выполнения, если не отметить 
	записи, то будет передан идентификатор текущей записи. В случае пустого 
	браузера действие будет выполнено, однако алгоритму не будут переданы идентификаторы 
	записей.</para>
	
	<para> При выполнении действия запускается алгоритм. В алгоритме доступны 
	функции, требующие обратные вызовы. Также добавлены следующие функции:</para>
	
	<itemizedlist>
		<listitem><literal>Function GetBeanName: string</literal> - возвращает 
		название бизнес-компонента, из которого вызвано действие связанное с 
		данным алгоритмом.</listitem>
		<listitem><literal>Function GetItemsCount: Integer</literal> - возвращает 
		количество элементов отмеченных пользователем для выполнения действия (возможно 
		значение 0, если действие было вызвано из пустого браузера).</listitem>
		<listitem><literal>GetItem(Index: Integer): Integer</literal> - возвращает 
		идентификатор записи БК ((Index &gt;= 0) and (Index &lt; GetItemsCount), в 
		случае выхода за данные границы будет возбуждена Исключительная ситуация).
		</listitem>
	</itemizedlist>
	
	<para> Все изменения относительно настройки действий будут доступны пользователю 
	только после переподключения к серверу приложения. Например, если был изменен 
	заголовок пункта, то новое название будет доступно только в следующем сеансе.  </para>
	
	<para>Однако ограничение прав на выполнение действия проверяется каждый раз при запуске 
	действия, таким образом, в случае, если удалить права для пользователя, 
	то при попытке выполнения данный пользователь получит сообщение о нарушении 
	безопасности.</para>
	
	<para>Подробнее о правилах построения алгоритмов Вы сможете прочитать в 
	Руководстве администратора.</para> -->
	
	<para>Подробнее Вы сможете прочитать в Руководстве администратора.</para>

</chapter>
